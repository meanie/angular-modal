function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}!function(e,n,t){"use strict";n.module("AppendAnimated.Service",[]).factory("$appendAnimated",["$animate",function(e){return function(n,t){var o=t.children();return o.length>0?e.enter(n,t,o[o.length-1]):e.enter(n,t)}}])}(window,window.angular),function(e,n,t){"use strict";n.module("ModalOverlay.Service",["AppendAnimated.Service"]).factory("$modalOverlay",["$animate","$document","$appendAnimated",function(e,t,o){var r=void 0,l=t.find("body").eq(0);return{show:function(e){if(!r)return r=n.element("<div></div>").attr({"class":e}),o(r,l)},hide:function(){r&&(e.leave(r),r=null)},setIndex:function(e,n){if(r){var t=e+2*(n-1);r[0].style.zIndex=t}}}}])}(window,window.angular),function(e,n,t){"use strict";n.module("ModalStack.Service",[]).factory("$modalStack",function(){var e=[];return{get:function(){return e},isEmpty:function(){return 0===e.length},numOpen:function(){return e.length},isOpen:function(n){if(!n)return!1;for(var t=0;t<e.length;t++)if(e[t].name===n)return!0;return!1},isLast:function(n){if(!n||0===e.length)return!1;var t=e[e.length-1];return t.name===n},add:function(n){e.push(n)},remove:function(n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}})}(window,window.angular);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,n,t){"use strict";n.module("Modal.Service",["ModalStack.Service","ModalOverlay.Service","AppendAnimated.Service"]).provider("$modal",function(){this.defaults={closeOnEsc:!0,closeOnClick:!0,template:null,templateUrl:null,scope:null,controller:null,controllerAs:"$ctrl",resolve:{},locals:null,appendTo:null,overlay:!0,wrapperClass:"modal-wrapper ModalWrapper",overlayClass:"modal-overlay ModalOverlay",onBeforeClose:null,once:!1},this.configs={},this.setDefaults=function(e){return this.defaults=n.extend(this.defaults,e||{}),this},this.modal=function(e,t){var o=this;return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?void n.forEach(e,function(e,n){o.modal(n,e)},this):(this.configs[e]=n.extend({},this.defaults,t||{}),this)},this.$get=["$rootScope","$q","$templateRequest","$injector","$controller","$compile","$document","$animate","$modalStack","$modalOverlay","$appendAnimated",function(e,t,o,r,l,c,a,i,s,u,d){function f(e,n){return e?t.when(e):o(n,!0)}function p(e){var o=[];return n.forEach(e,function(e){n.isFunction(e)||n.isArray(e)?o.push(t.when(r.invoke(e))):n.isString(e)?o.push(t.when(r.get(e))):o.push(t.when(e))}),o}function m(n){var t=n.$$modal,o=s.numOpen()+1;return t.element.attr({"class":t.wrapperClass}).html(t.content),t.element=c(t.element)(t.scope),t.element[0].style.zIndex=y+2*o-1,t.closeOnClick&&t.element.on("click",function(t){t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.$apply(function(){h(n,"cancel",!0)}))}),s.add(n),t.showOverlay&&(u.show(t.overlayClass),u.setIndex(y,o)),t.controller&&t.controller.$onInit&&t.controller.$onInit.call(t.controller),d(t.element,t.parent).then(function(){t.controller&&t.controller.$postLink&&t.controller.$postLink.call(t.controller),t.openedDeferred.resolve(!0)})["catch"](function(e){return t.openedDeferred.reject(e)})}function v(e,n,o){var r=e.$$modal,l=s.numOpen()-1;return r.element?(o?r.resultDeferred.reject(n):r.resultDeferred.resolve(n),s.remove(e),s.isEmpty()?u.hide():u.setIndex(y,l),i.leave(r.element).then(function(){r.controller&&r.controller.$onDestroy&&r.controller.$onDestroy.call(r.controller),r.scope&&(r.scope.$destroy(),r.scope=null),r.element=null,a[0].removeEventListener("keydown",r.broadcastEnter),r.closeOnEsc&&(a[0].removeEventListener("keydown",r.closeOnEsc),r.closeOnEsc=null)})):t.when(!0)}function h(e,n,o){var r=e.$$modal;if(!r.element)return t.when(!0);if("function"==typeof r.onBeforeClose){var l=r.onBeforeClose(e,n,o);if(l&&"function"==typeof l.then)return l.then(function(){return v(e,n,o)})["catch"](function(e){return t.reject(e||"Close prevented")});if("undefined"!=typeof l&&l!==!0)return t.reject(l||"Close prevented")}return v(e,n,o)}var y=1e4,w=this.defaults,$=this.configs,g=a.find("body").eq(0),E={open:function(o,r,c){if("string"!=typeof o&&(r=o||{},o=""),o&&"undefined"!=typeof $[o])r=n.extend({},$[o],r||{});else if(o)throw new Error("String given as options, but config with name "+o+" was not predefined");if(o&&r.once&&s.isOpen(o))return null;if(r=n.extend({},w,r||{}),r.resolve=r.resolve||{},r.appendTo=r.appendTo||g,!r.template&&!r.templateUrl)throw new Error("One of template or templateUrl options is required");if(!r.appendTo.length)throw new Error("Element to append modal to not found in the DOM");var i={openedDeferred:t.defer(),resultDeferred:t.defer(),parent:r.appendTo,wrapperClass:r.wrapperClass,overlayClass:r.overlayClass,showOverlay:r.overlay,closeOnClick:r.closeOnClick,onBeforeClose:r.onBeforeClose,element:n.element("<div></div>")},u={$$modal:i,name:o,opened:i.openedDeferred.promise,result:i.resultDeferred.promise,close:function(e){return h(u,e)},dismiss:function(e){return h(u,e,!0)}};return r.closeOnEsc&&(i.closeOnEsc=function(n){var t=n.keyCode||n.which;27!==t||o&&!s.isLast(o)||e.$apply(function(){h(u,"cancel",!0)})},a[0].addEventListener("keydown",i.closeOnEsc)),i.broadcastEnter=function(n){var t=n.keyCode||n.which,o="TEXTAREA"===n.target.tagName;13!==t||n.defaultPrevented||o||e.$broadcast("$modalEnterKey",u,n)},a[0].addEventListener("keydown",i.broadcastEnter),t.all([f(r.template,r.templateUrl)].concat(_toConsumableArray(p(r.resolve)))).then(function(t){i.content=t.shift(),i.scope=(r.scope||e).$new(),i.scope.$close=u.close,i.scope.$dismiss=u.dismiss,r.controller&&!function(){var e={};e.$scope=i.scope,e.$modalInstance=u,e.$element=i.element,r.locals&&"object"===_typeof(r.locals)&&n.forEach(r.locals,function(n,t){e[t]=n}),n.forEach(r.resolve,function(n,o){e[o]=t.shift()}),i.controller=l(r.controller,e),r.controllerAs&&(i.scope[r.controllerAs]=i.controller),n.forEach(r.locals,function(e,n){i.controller[n]=e})}(),c&&E.closeAll(),m(u)})["catch"](function(e){i.openedDeferred.reject(e),i.resultDeferred.reject(e)}),u},closeAll:function(){var e=s.get();n.forEach(e,function(e){h(e,"cancel",!0)})},isOpen:function(e){return s.isOpen(e)}};return E}]})}(window,window.angular);
//# sourceMappingURL=meanie-angular-modal.min.js.map
