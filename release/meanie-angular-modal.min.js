function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}!function(e,n,t){"use strict";n.module("AppendAnimated.Service",[]).factory("$appendAnimated",["$animate",function(e){return function(n,t){var r=t.children();return r.length>0?e.enter(n,t,r[r.length-1]):e.enter(n,t)}}])}(window,window.angular),function(e,n,t){"use strict";n.module("ModalOverlay.Service",["AppendAnimated.Service"]).factory("$modalOverlay",["$animate","$document","$appendAnimated",function(e,t,r){var o=void 0,l=t.find("body").eq(0);return{show:function(e){if(!o)return o=n.element("<div></div>").attr({"class":e}),r(o,l)},hide:function(){o&&(e.leave(o),o=null)},setIndex:function(e,n){if(o){var t=e+2*(n-1);o[0].style.zIndex=t}}}}])}(window,window.angular),function(e,n,t){"use strict";n.module("ModalStack.Service",[]).factory("$modalStack",function(){var e=[];return{get:function(){return e},isEmpty:function(){return 0===e.length},numOpen:function(){return e.length},isOpen:function(n){if(!n)return!1;for(var t=0;t<e.length;t++)if(e[t].name===n)return!0;return!1},isLast:function(n){if(!n||0===e.length)return!1;var t=e[e.length-1];return t.name===n},add:function(n){e.push(n)},remove:function(n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}})}(window,window.angular);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,n,t){"use strict";n.module("Modal.Service",["ModalStack.Service","ModalOverlay.Service","AppendAnimated.Service"]).provider("$modal",function(){var e="cancel",t="close prevented";this.defaults={closeOnEsc:!0,closeOnClick:!0,template:null,templateUrl:null,scope:null,controller:null,controllerAs:"$ctrl",resolve:{},locals:null,appendTo:null,overlay:!0,wrapperClass:"modal-wrapper ModalWrapper",overlayClass:"modal-overlay ModalOverlay",onBeforeClose:null,once:!1,rejectOnDismissal:!1},this.configs={},this.setDefaults=function(e){return this.defaults=n.extend(this.defaults,e||{}),this},this.modal=function(e,t){var r=this;return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?void n.forEach(e,function(e,n){r.modal(n,e)},this):(this.configs[e]=n.extend({},this.defaults,t||{}),this)},this.$get=["$rootScope","$q","$templateRequest","$injector","$controller","$compile","$document","$animate","$modalStack","$modalOverlay","$appendAnimated",function(r,o,l,c,i,a,s,u,d,f,p){function m(e,n){return e?o.when(e):l(n,!0)}function v(e){var t=[];return n.forEach(e,function(e){n.isFunction(e)||n.isArray(e)?t.push(o.when(c.invoke(e))):n.isString(e)?t.push(o.when(c.get(e))):t.push(o.when(e))}),t}function h(n){var t=n.$$modal,o=d.numOpen()+1;return t.element.attr({"class":t.wrapperClass}).html(t.content),t.element=a(t.element)(t.scope),t.element[0].style.zIndex=w+2*o-1,t.closeOnClick&&t.element.on("click",function(t){t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),r.$apply(function(){$(n,e,!0)}))}),d.add(n),t.showOverlay&&(f.show(t.overlayClass),f.setIndex(w,o)),t.controller&&t.controller.$onInit&&t.controller.$onInit.call(t.controller),p(t.element,t.parent).then(function(){t.controller&&t.controller.$postLink&&t.controller.$postLink.call(t.controller),t.openedDeferred.resolve(!0)})["catch"](function(e){return t.openedDeferred.reject(e)})}function y(e,n,t){var r=e.$$modal,l=d.numOpen()-1;return r.element?(t?(r.closedDeferred.resolve(n),r.rejectOnDismissal&&r.resultDeferred.reject(n)):r.resultDeferred.resolve(n),d.remove(e),d.isEmpty()?f.hide():f.setIndex(w,l),u.leave(r.element).then(function(){r.controller&&r.controller.$onDestroy&&r.controller.$onDestroy.call(r.controller),r.scope&&(r.scope.$destroy(),r.scope=null),r.element=null,s[0].removeEventListener("keydown",r.broadcastEnter),r.closeOnEsc&&(s[0].removeEventListener("keydown",r.closeOnEsc),r.closeOnEsc=null)})):o.when(!0)}function $(e,n,r){var l=e.$$modal;if(!l.element)return o.when(!0);if("function"==typeof l.onBeforeClose){var c=l.onBeforeClose(e,n,r);if(c&&"function"==typeof c.then)return c.then(function(){return y(e,n,r)})["catch"](function(e){return o.reject(e||t)});if("undefined"!=typeof c&&c!==!0)return o.reject(c||t)}return y(e,n,r)}var w=1e4,g=this.defaults,E=this.configs,O=s.find("body").eq(0),A={open:function(t,l,c){if("string"!=typeof t&&(l=t||{},t=""),t&&"undefined"!=typeof E[t])l=n.extend({},E[t],l||{});else if(t)throw new Error("String given as options, but config with name "+t+" was not predefined");if(t&&l.once&&d.isOpen(t))return null;if(l=n.extend({},g,l||{}),l.resolve=l.resolve||{},l.appendTo=l.appendTo||O,!l.template&&!l.templateUrl)throw new Error("One of template or templateUrl options is required");if(!l.appendTo.length)throw new Error("Element to append modal to not found in the DOM");var a=Object.assign({openedDeferred:o.defer(),closedDeferred:o.defer(),resultDeferred:o.defer(),parent:l.appendTo,showOverlay:l.overlay,element:n.element("<div></div>")},l),u={$$modal:a,name:t,opened:a.openedDeferred.promise,closed:a.closedDeferred.promise,result:a.resultDeferred.promise,resolve:function(e){return $(u,e)},close:function(e){return $(u,e,!0)}};return l.closeOnEsc&&(a.closeOnEsc=function(n){var o=n.keyCode||n.which;27!==o||t&&!d.isLast(t)||r.$apply(function(){$(u,e,!0)})},s[0].addEventListener("keydown",a.closeOnEsc)),a.broadcastEnter=function(e){var n=e.keyCode||e.which,t="TEXTAREA"===e.target.tagName;13!==n||e.defaultPrevented||t||r.$broadcast("$modalEnterKey",u,e)},s[0].addEventListener("keydown",a.broadcastEnter),o.all([m(l.template,l.templateUrl)].concat(_toConsumableArray(v(l.resolve)))).then(function(e){a.content=e.shift(),a.scope=(l.scope||r).$new(),a.scope.$close=u.close,a.scope.$resolve=u.resolve,l.controller&&!function(){var t={};t.$scope=a.scope,t.$modalInstance=u,t.$element=a.element,l.locals&&"object"===_typeof(l.locals)&&n.forEach(l.locals,function(e,n){t[n]=e}),n.forEach(l.resolve,function(n,r){t[r]=e.shift()}),a.controller=i(l.controller,t),l.controllerAs&&(a.scope[l.controllerAs]=a.controller),n.forEach(l.locals,function(e,n){a.controller[n]=e})}(),c&&A.closeAll(),h(u)})["catch"](function(e){a.openedDeferred.reject(e),a.resultDeferred.reject(e)}),u},closeAll:function(){var t=d.get();n.forEach(t,function(n){$(n,e,!0)})},isOpen:function(e){return d.isOpen(e)}};return A}]})}(window,window.angular);
//# sourceMappingURL=meanie-angular-modal.min.js.map
