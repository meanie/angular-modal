var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,n,t){"use strict";n.module("Modal.Service",[]).factory("$modalStack",function(){var e=[];return{get:function(){return e},isEmpty:function(){return 0===e.length},numOpen:function(){return e.length},isOpen:function(n){if(!n)return!1;for(var t=0;t<e.length;t++)if(e[t].name===n)return!0;return!1},isLast:function(n){if(!n||0===e.length)return!1;var t=e[e.length-1];return t.name===n},add:function(n){e.push(n)},remove:function(n){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}}).factory("$modalOverlay",["$animate","$document","$appendAnimated",function(e,t,o){var r=void 0,l=t.find("body").eq(0);return{show:function(e){if(!r)return r=n.element("<div></div>").attr({"class":e}),o(r,l)},hide:function(){r&&(e.leave(r),r=null)},setIndex:function(e,n){if(r){var t=e+2*(n-1);r[0].style.zIndex=t}}}}]).factory("$appendAnimated",["$animate",function(e){return function(n,t){var o=t.children();return o.length>0?e.enter(n,t,o[o.length-1]):e.enter(n,t)}}]).provider("$modal",function(){this.defaults={closeOnEsc:!0,closeOnClick:!0,template:null,templateUrl:null,scope:null,controller:null,controllerAs:null,resolve:{},locals:null,appendTo:null,overlay:!0,wrapperClass:"modal-wrapper ModalWrapper",overlayClass:"modal-overlay ModalOverlay",onBeforeClose:null},this.configs={},this.setDefaults=function(e){return this.defaults=n.extend(this.defaults,e||{}),this},this.modal=function(e,t){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?void n.forEach(e,function(e,n){this.modal(n,e)},this):(this.configs[e]=n.extend({},this.defaults,t||{}),this)},this.$get=["$rootScope","$q","$templateRequest","$injector","$controller","$compile","$document","$animate","$modalStack","$modalOverlay","$appendAnimated",function(e,o,r,l,s,a,c,i,u,f,d){function p(e,n){return e?o.when(e):r(n,!0)}function m(e){var t=[];return n.forEach(e,function(e){n.isFunction(e)||n.isArray(e)?t.push(o.when(l.invoke(e))):n.isString(e)?t.push(o.when(l.get(e))):t.push(o.when(e))}),t}function h(t){var o=t.$$modal,r=u.numOpen()+1;return o.element=n.element("<div></div>").attr({"class":o.wrapperClass}).html(o.content),o.element=a(o.element)(o.scope),o.element[0].style.zIndex=y+2*r-1,o.closeOnClick&&o.element.on("click",function(n){n.target===n.currentTarget&&(n.preventDefault(),n.stopPropagation(),e.$apply(function(){v(t,"cancel",!0)}))}),u.add(t),o.showOverlay&&(f.show(o.overlayClass),f.setIndex(y,r)),d(o.element,o.parent).then(function(){o.openedDeferred.resolve(!0)},function(e){o.openedDeferred.reject(e)})}function v(e,n,r){var l=e.$$modal,s=u.numOpen()-1;if(!l.element)return o.when(!0);if("function"==typeof l.onBeforeClose){var a=l.onBeforeClose(e,n,r);if(a!==!0&&a!==t)return o.reject(a||"Close prevented")}return r?l.resultDeferred.reject(n):l.resultDeferred.resolve(n),u.remove(e),u.isEmpty()?f.hide():f.setIndex(y,s),i.leave(l.element).then(function(){l.scope&&(l.scope.$destroy(),l.scope=null),l.element=null,c[0].removeEventListener("keydown",l.broadcastEnter),l.closeOnEsc&&(c[0].removeEventListener("keydown",l.closeOnEsc),l.closeOnEsc=null)})}var y=1e4,$=this.defaults,w=this.configs,E=c.find("body").eq(0),g={open:function(t,r){if("string"!=typeof t&&(r=t||{},t=""),t&&"undefined"!=typeof w[t])r=n.extend({},w[t],r||{});else if(t)throw new Error("String given as options, but config with name "+t+" was not predefined");if(r=n.extend({},$,r||{}),r.resolve=r.resolve||{},r.appendTo=r.appendTo||E,!r.template&&!r.templateUrl)throw new Error("One of template or templateUrl options is required");if(!r.appendTo.length)throw new Error("Element to append modal to not found in the DOM");var l={openedDeferred:o.defer(),resultDeferred:o.defer(),parent:r.appendTo,wrapperClass:r.wrapperClass,overlayClass:r.overlayClass,showOverlay:r.overlay,closeOnClick:r.closeOnClick,onBeforeClose:r.onBeforeClose},a={$$modal:l,name:t,opened:l.openedDeferred.promise,result:l.resultDeferred.promise,close:function(e){return v(a,e)},dismiss:function(e){return v(a,e,!0)}};return r.closeOnEsc&&(l.closeOnEsc=function(n){var o=n.keyCode||n.which;27===o&&u.isLast(t)&&e.$apply(function(){v(a,"cancel",!0)})},c[0].addEventListener("keydown",l.closeOnEsc)),l.broadcastEnter=function(n){var t=n.keyCode||n.which,o="TEXTAREA"===n.target.tagName;13!==t||n.defaultPrevented||o||e.$broadcast("$modalEnterKey",a,n)},c[0].addEventListener("keydown",l.broadcastEnter),o.all([p(r.template,r.templateUrl)].concat(m(r.resolve))).then(function(t){l.content=t.shift(),l.scope=(r.scope||e).$new(),l.scope.$close=a.close,l.scope.$dismiss=a.dismiss,r.controller&&!function(){var e={};e.$scope=l.scope,e.$modalInstance=a,r.locals&&"object"===_typeof(r.locals)&&n.forEach(r.locals,function(n,t){e[t]=n}),n.forEach(r.resolve,function(n,o){e[o]=t.shift()}),l.controller=s(r.controller,e),r.controllerAs&&(l.scope[r.controllerAs]=l.controller)}(),h(a)})["catch"](function(e){l.openedDeferred.reject(e),l.resultDeferred.reject(e)}),a},closeAll:function(){var e=u.get();n.forEach(e,function(e){v(e,"cancel",!0)})},isOpen:function(e){return u.isOpen(e)}};return g}]})}(window,window.angular);
//# sourceMappingURL=meanie-angular-modal.min.js.map
